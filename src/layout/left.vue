<template>
  <div class="left">
    <div class="left-bar">
      <a-popover placement="right" v-for="(item, index) in tools" :key="index">
        <template #content>
          <b>{{ item.text }}</b>
        </template>
        <button
          :class="{ active: currentTool === item.type }"
          @click="toggleTool(item)"
        >
          <svg
            v-if="item.type === 'path-tool'"
            width="17.5"
            height="17.5"
            fill="none"
            viewBox="0 0 100 100"
          >
            <path fill="currentColor" :d="d" />
          </svg>
          <svg
            v-else
            width="17.5"
            height="17.5"
            fill="none"
            viewBox="0 0 48 48"
          >
            <use :xlink:href="`#${item.text}`" />
          </svg>
        </button>
      </a-popover>
    </div>

    <div style="position: absolute; left: 37px; height: 100%" class="drawer">
      <a-drawer
        :width="220"
        placement="left"
        :closable="false"
        :mask="false"
        :open="openDrawer"
        :get-container="false"
        @close="openDrawer = false"
      >
        <div
          class="flex flex-align-center"
          style="gap: 6px; margin-bottom: 6px"
          v-for="t in icons"
          :key="t"
        >
          <button
            @click="changePathTool(item)"
            :class="{ active: d === item }"
            style="width: 25%; height: 36px"
            v-for="item in t"
            :key="item"
          >
            <svg viewBox="0 0 100 100" width="16" height="16">
              <path fill="currentColor" stroke="#333333" :d="item"></path>
            </svg>
          </button>
        </div>
      </a-drawer>
    </div>
  </div>
</template>
<script>
let preTool = "";

export default {
  data() {
    return {
      d: "M 49.997 92.307 L 47.833 90.86 C 37.549 83.995 24.538 76.23 14.902 64.825 C 4.749 52.807 -0.128 40.466 0.003 27.083 C 0.149 12.148 12.132 0 26.702 0 C 38.267 0 45.956 6.73 49.997 11.589 C 54.044 6.73 61.732 0 73.297 0 C 87.867 0 99.844 12.148 99.997 27.077 C 100.132 40.466 95.255 52.8 85.092 64.818 C 75.456 76.23 62.444 83.995 52.161 90.86 L 49.997 92.307 Z",
      openDrawer: false,
      currentTool: "",
      tools: [
        { text: "Select", type: "transform-tool" },
        { text: "Pan", type: "pan-tool" },
        { text: "Rect", type: "rect-tool" },
        { text: "Ellipse", type: "ellipse-tool" },
        { text: "Triangle", type: "triangle-tool" },
        { text: "Polygon", type: "n-gon-tool" },
        { text: "Path Tool", type: "path-tool" },
        { text: "Freehand", type: "freehand-tool" },
        { text: "Pen", type: "pen-tool" },
        { text: "Text", type: "text-tool" },
        { text: "Vektor", type: "vektor-tool" },
      ],
      icons: [
        [
          "M 49.997 92.307 L 47.833 90.86 C 37.549 83.995 24.538 76.23 14.902 64.825 C 4.749 52.807 -0.128 40.466 0.003 27.083 C 0.149 12.148 12.132 0 26.702 0 C 38.267 0 45.956 6.73 49.997 11.589 C 54.044 6.73 61.732 0 73.297 0 C 87.867 0 99.844 12.148 99.997 27.077 C 100.132 40.466 95.255 52.8 85.092 64.818 C 75.456 76.23 62.444 83.995 52.161 90.86 L 49.997 92.307 Z",
          "M 78.125 21.875 C 65.074 25.375 54.775 28.125 40.625 28.125 C 26.475 28.125 16.176 25.375 3.125 21.875 L 0 31.836 C 9.375 35.846 18.889 38.703 28.75 42.227 L 18.75 96.875 L 29.766 100 L 38.672 65.625 L 42.578 65.625 L 51.484 100 L 62.5 96.875 L 52.5 42.227 C 62.355 39.049 71.875 35.846 81.25 32.031 L 78.125 21.875 Z M 40.625 21.875 C 32.205 21.875 26.943 12.76 31.153 5.469 C 35.363 -1.823 45.887 -1.823 50.097 5.469 C 51.057 7.131 51.563 9.018 51.563 10.937 C 51.556 16.975 46.663 21.869 40.625 21.875 Z",
          "M 81.614 33.324 C 81.047 33.324 78.606 33.34 77.725 33.388 L 65.693 33.705 L 37.947 0 L 24.866 0 L 40.401 34.284 L 20.134 34.584 L 10.911 23.327 L 0.058 23.327 L 4.351 42.942 C 4.382 43.054 4.42 43.164 4.461 43.273 C 4.464 43.283 4.464 43.294 4.461 43.304 C 4.419 43.412 4.382 43.522 4.351 43.633 L 0 63.315 L 10.784 63.315 L 20.25 51.86 L 40.405 52.312 L 24.864 86.641 L 37.985 86.641 L 65.685 52.953 L 77.717 53.274 C 78.61 53.322 81.049 53.339 81.603 53.339 C 86.675 53.339 90.824 52.643 93.935 51.268 C 99.213 48.944 100 45.291 100 43.321 C 100 37.06 93.127 33.324 81.614 33.324 Z M 66.766 51.631 Z",
          "M 19.231 0 L 80.769 0 L 80.769 7.692 L 19.231 7.692 L 19.231 0 Z M 11.538 11.538 L 88.462 11.538 L 88.462 19.231 L 11.538 19.231 L 11.538 11.538 Z M 100 92.308 L 0 92.308 L 0 23.077 L 100 23.077 L 100 92.308 Z",
        ],
        [
          "M 19.843 19.756 C 9.854 29.703 4.823 42.312 2.289 52.324 L 47.449 97.288 C 57.504 94.766 70.168 89.757 80.157 79.811 C 90.145 69.864 95.177 57.254 97.71 47.241 L 52.551 2.278 C 42.495 4.801 29.832 9.821 19.843 19.756 Z M 77.656 77.308 Z M 67.612 27.263 L 72.639 32.268 L 65.098 39.774 L 70.125 44.779 L 65.078 49.777 L 60.045 44.779 L 55.027 49.777 L 60.045 54.788 L 55.02 59.792 L 50 54.788 L 44.973 59.792 L 50 64.797 L 44.973 69.802 L 39.955 64.797 L 32.415 72.304 L 27.381 67.299 L 34.922 59.792 L 29.895 54.788 L 34.922 49.777 L 39.955 54.788 L 44.973 49.777 L 39.955 44.779 L 44.98 39.774 L 50 44.779 L 55.027 39.774 L 50 34.77 L 55.027 29.765 L 60.045 34.77 L 67.612 27.263 Z M 99.661 37.145 C 101.306 24.921 96.429 3.582 96.429 3.582 C 96.429 3.582 74.969 -1.302 62.692 0.336 C 62.125 0.41 61.529 0.497 60.906 0.591 L 99.405 38.919 C 99.5 38.303 99.585 37.71 99.661 37.145 Z M 0.339 62.422 C -1.307 74.645 3.582 96.429 3.582 96.429 C 3.582 96.429 16.975 100.001 25.872 100.001 C 29.697 99.994 33.517 99.737 37.308 99.23 C 37.875 99.157 38.471 99.07 39.093 98.974 L 0.595 60.647 C 0.499 61.263 0.414 61.857 0.339 62.422 Z",
          "M 40.385 0 L 71.512 30.813 L 71.512 0 L 40.385 0 Z M 32.084 2.495 L 7.692 20.673 L 50 20.673 L 32.084 2.495 Z M 69.231 71.154 L 100 71.154 L 100 40.385 L 69.231 71.154 Z M 97.596 32.212 L 79.327 7.692 L 79.327 50 L 97.596 32.212 Z M 0 28.365 L 0 59.135 L 30.769 28.365 L 0 28.365 Z M 67.788 97.596 L 92.308 79.327 L 50 79.327 L 67.788 97.596 Z M 2.404 67.788 L 20.673 92.308 L 20.673 50 L 2.404 67.788 Z M 71.512 41.856 L 58.159 28.524 L 41.841 28.524 L 28.488 41.856 L 28.488 58.144 L 41.858 71.49 C 41.964 71.49 42.07 71.476 42.178 71.476 L 58.159 71.476 L 71.512 58.144 L 71.512 41.856 Z M 28.361 69.252 L 28.365 100 L 59.135 100 L 28.361 69.252 Z",
          "M 0 0 L 0 72.917 C 0 76.368 2.798 79.167 6.25 79.167 L 93.75 79.167 C 97.202 79.167 100 76.368 100 72.917 L 100 0 L 0 0 Z M 50 60.06 L 27.427 37.5 L 33.333 31.594 L 45.833 44.107 L 45.833 12.5 L 54.167 12.5 L 54.167 44.107 L 66.685 31.589 L 72.573 37.484 L 50 60.06 Z",
          "M 72.322 28.571 L 72.322 25.893 C 72.311 11.847 61.115 0.365 47.074 0 L 45.783 0 C 31.742 0.365 20.547 11.847 20.535 25.893 L 20.535 28.571 L 0.893 28.571 C 0.4 28.571 0 28.972 0 29.465 L 0 96.429 C 0 98.401 1.599 100 3.571 100 L 89.286 100 C 91.258 100 92.857 98.401 92.857 96.429 L 92.857 29.465 C 92.857 28.972 92.457 28.571 91.964 28.571 L 72.322 28.571 Z M 63.393 28.571 L 29.465 28.571 L 29.465 26.116 C 29.465 16.777 36.922 9.027 46.262 8.928 C 55.691 8.846 63.384 16.462 63.393 25.893 L 63.393 28.571 Z",
        ],
        [
          "M 60.786 60.007 C 67.188 50.947 69.893 40.142 68.409 29.578 C 65.765 10.814 48.351 -2.308 29.587 0.339 C 10.823 2.986 -2.3 20.379 0.337 39.143 C 1.816 49.677 7.397 59.307 16.046 66.261 C 21.306 70.491 27.302 73.318 32.865 74.34 L 31.231 83.18 C 31.036 84.232 31.931 85.165 32.99 85.014 L 38.895 84.191 C 42.003 91.202 47.036 96.012 54.221 98.85 L 57.129 100 L 59.43 94.185 L 56.521 93.033 C 51.371 90.997 47.827 87.92 45.38 83.276 L 49.649 82.676 C 50.707 82.528 51.308 81.386 50.832 80.43 L 46.827 72.385 C 51.905 69.87 56.891 65.509 60.786 60.007 Z M 29.353 63.068 C 21.288 59.878 14.439 52.767 11.478 44.511 L 10.422 41.567 L 16.31 39.456 L 17.365 42.4 C 20.199 50.304 26.604 55.255 31.653 57.255 L 34.562 58.404 L 32.261 64.221 L 29.353 63.068 Z",
          "M 93.333 0 C 79.248 0.06 68.777 2 61.2 5.352 C 55.546 7.852 53.333 9.744 53.333 16.152 L 53.333 83.333 C 61.994 75.521 69.679 73.333 100 73.333 L 100 0 L 93.333 0 Z M 6.667 0 C 20.752 0.06 31.223 2 38.8 5.352 C 44.454 7.852 46.667 9.744 46.667 16.152 L 46.667 83.333 C 38.006 75.521 30.321 73.333 0 73.333 L 0 0 L 6.667 0 Z",
          "M 44.191 39.549 L 0 83.378 L 16.661 99.988 L 60.761 55.759 C 71.132 59.656 84.312 58.558 92.677 50.228 C 101.702 41.229 101.682 26.124 96.429 15.235 L 76.938 34.665 L 65.26 23.031 L 84.751 3.6 C 73.875 -1.683 58.625 -1.71 49.599 7.289 C 41.111 15.75 40.051 29.072 44.191 39.549 Z",
          "M 23.333 93.333 L 43.333 93.333 L 43.333 100 L 23.333 100 L 23.333 93.333 Z M 20 83.333 L 46.666 83.333 L 46.666 90 L 20 90 L 20 83.333 Z M 56.962 9.727 C 50.698 3.454 42.306 0 33.333 0 C 14.905 -0.044 -0.044 14.905 0 33.333 C 0 43.045 3.723 52.131 10.208 58.258 L 11.116 59.11 C 14.868 62.618 20 67.425 20 71.666 L 20 80 L 30 80 L 30 52.731 L 20.775 47.5 L 24.583 42.025 L 33.333 46.666 L 41.935 42.002 L 45.914 47.352 L 36.666 52.768 L 36.666 80 L 46.666 80 L 46.666 71.666 C 46.666 67.525 51.741 62.722 55.448 59.214 L 56.47 58.243 C 63.141 51.875 66.666 43.252 66.666 33.333 C 66.711 24.485 63.217 15.985 56.962 9.727 Z",
        ],
        [
          "M 83.333 40 L 66.666 40 L 66.666 38.805 C 73.458 31.124 69.388 18.971 59.341 16.93 C 58.573 16.774 57.793 16.686 57.01 16.667 C 55.947 12.955 53.971 9.568 51.262 6.815 C 46.986 2.438 41.119 -0.02 35 0.001 C 28.769 0.001 22.962 2.559 18.541 7.223 C 9.984 4.5 1.686 12.062 3.607 20.835 C 3.798 21.711 4.09 22.562 4.477 23.371 C 4.269 23.55 4.079 23.734 3.887 23.925 C 1.376 26.432 -0.024 29.84 0 33.388 C 0.003 37.087 1.576 40.611 4.327 43.084 C 5.044 43.735 5.828 44.308 6.667 44.792 L 6.667 96.667 C 6.667 98.508 8.159 100 10 100 L 63.333 100 C 65.174 100 66.666 98.508 66.666 96.667 L 66.666 86.667 L 83.333 86.667 C 85.174 86.667 86.666 85.175 86.666 83.334 L 86.666 43.334 C 86.666 41.493 85.174 40 83.333 40 Z M 26.666 86.667 L 20 86.667 L 20 46.667 L 26.666 46.667 L 26.666 86.667 Z M 40 86.667 L 33.333 86.667 L 33.333 46.667 L 40 46.667 L 40 86.667 Z M 53.333 86.667 L 46.666 86.667 L 46.666 46.667 L 53.333 46.667 L 53.333 86.667 Z M 56.666 36.667 C 54.931 36.667 52.385 35.588 51.106 34.311 L 50.131 33.334 L 20.998 33.334 L 20.208 35.528 C 18.998 38.861 16.285 39.78 14.223 39.963 C 12.25 40.14 10.294 39.485 8.825 38.157 C 7.462 36.936 6.68 35.195 6.675 33.365 C 6.663 31.591 7.364 29.887 8.619 28.634 C 8.652 28.598 8.687 28.567 8.723 28.532 C 9.959 27.335 11.613 26.666 13.333 26.667 C 13.352 26.667 15.233 26.738 16.75 27.875 L 19.416 29.875 L 23.416 24.542 L 20.75 22.542 C 18.59 20.967 16.005 20.081 13.333 20 C 12.352 20.002 11.374 20.11 10.417 20.323 C 8.894 16.788 11.77 12.931 15.593 13.38 C 16.972 13.543 18.221 14.27 19.041 15.39 L 19.089 15.463 L 19.173 15.559 C 19.608 16.127 19.958 16.754 20.214 17.421 L 21.385 20.546 L 27.635 18.205 L 26.464 15.08 C 25.959 13.75 25.257 12.505 24.381 11.384 C 24.302 11.275 24.216 11.175 24.133 11.069 C 27.162 8.219 30.966 6.667 35 6.667 C 39.331 6.655 43.482 8.397 46.506 11.496 C 50.306 15.395 51.968 20.9 50.96 26.25 L 50.335 29.525 L 56.883 30.775 L 57.508 27.5 C 57.762 26.166 57.899 24.811 57.916 23.453 C 62.957 24.417 65.064 30.476 61.708 34.359 C 60.442 35.824 58.602 36.666 56.666 36.667 Z M 80 80 L 66.666 80 L 66.666 46.667 L 80 46.667 L 80 80 Z",
          "M 2.438 66.903 C -0.812 70.157 -0.812 75.429 2.438 78.683 L 21.324 97.568 C 24.578 100.819 29.85 100.819 33.103 97.568 L 48.749 81.922 L 18.084 51.257 L 2.438 66.903 Z M 100 27.319 C 100.007 25.1 99.125 22.971 97.552 21.407 L 78.594 2.448 C 75.328 -0.816 70.036 -0.816 66.77 2.448 L 51.666 17.565 L 82.442 48.34 L 97.552 33.23 C 99.125 31.666 100.007 29.537 100 27.319 Z M 53.553 77.131 L 77.721 52.963 L 47.035 22.298 L 22.868 46.465 L 53.553 77.131 Z M 57.643 47.651 C 59.457 45.836 62.556 46.665 63.221 49.143 C 63.886 51.622 61.618 53.891 59.139 53.227 C 58.573 53.076 58.057 52.778 57.643 52.363 C 56.343 51.062 56.343 48.953 57.643 47.651 Z M 47.643 37.651 C 49.457 35.836 52.556 36.665 53.22 39.143 C 53.885 41.622 51.618 43.89 49.139 43.227 C 48.573 43.076 48.057 42.778 47.643 42.363 C 46.342 41.062 46.342 38.952 47.643 37.651 Z M 47.643 57.651 C 49.457 55.836 52.556 56.665 53.22 59.144 C 53.885 61.622 51.618 63.891 49.139 63.227 C 48.573 63.076 48.057 62.778 47.643 62.364 C 46.342 61.062 46.342 58.953 47.643 57.651 Z M 42.355 47.651 C 44.171 49.465 43.341 52.563 40.863 53.228 C 38.385 53.893 36.116 51.626 36.779 49.147 C 36.93 48.581 37.228 48.065 37.643 47.651 C 38.944 46.35 41.054 46.35 42.355 47.651 Z",
          "M 100 13.333 L 87.917 13.333 L 87.917 0 L 72.083 0 L 72.083 25.417 L 27.917 25.417 L 27.917 0 L 12.083 0 L 12.083 13.333 L 0 13.333 L 0 46.667 L 12.083 46.667 L 12.083 60 L 27.917 60 L 27.917 34.583 L 72.083 34.583 L 72.083 60 L 87.917 60 L 87.917 46.667 L 100 46.667 L 100 13.333 Z",
          "M 90.525 5.067 L 92.857 0 L 17.946 0 C 11.754 0 7.009 1.467 3.815 4.355 C 1.426 6.533 0 9.574 0 12.5 L 0 17.857 L 3.571 17.857 C 10.491 17.857 10.714 21.605 10.714 25.67 L 10.714 95.536 C 10.714 98.001 12.713 100 15.179 100 L 84.821 100 C 87.287 100 89.286 98.001 89.286 95.536 L 89.286 14.286 C 89.286 10.455 89.795 6.665 90.525 5.067 Z M 82.143 14.286 L 82.143 28.571 L 17.857 28.571 L 17.857 23.661 C 17.857 15.592 13.17 12.277 8.533 11.728 C 9.152 8.482 12.879 7.154 17.946 7.154 L 82.661 7.154 C 82.317 9.516 82.143 11.899 82.143 14.286 Z",
        ],
        [
          "M 50 0 C 22.43 0 0 22.43 0 50 C 0 77.57 22.43 100 50 100 C 77.57 100 100 77.57 100 50 C 100 22.43 77.57 0 50 0 Z M 40.865 75.091 L 21.49 53.56 L 27.209 48.413 L 40.671 63.37 L 72.596 25.351 L 78.495 30.288 L 40.865 75.091 Z",
          "M 73.437 68.75 L 22.656 68.75 C 16.334 68.75 10.893 67.076 6.916 63.912 C 2.391 60.308 0 54.959 0 48.437 C 0 36.357 9.461 29.816 19.092 28.39 C 20.365 20.347 23.779 13.469 29.074 8.379 C 34.695 2.971 42.201 -0.034 50 0 C 56.934 0 63.328 2.283 68.492 6.601 C 72.439 9.93 75.477 14.204 77.324 19.025 C 83.234 19.965 88.545 22.381 92.437 25.931 C 97.385 30.445 100 36.605 100 43.75 C 100 50.781 97.191 57.203 92.092 61.834 C 87.18 66.295 80.555 68.75 73.437 68.75 Z",
          "M 100 48.069 C 99.933 46.83 98.982 45.82 97.75 45.679 L 91.586 44.682 C 91.017 44.588 90.577 44.131 90.505 43.559 C 90.387 42.802 90.264 42.016 90.096 41.271 C 89.985 40.715 90.239 40.15 90.728 39.864 L 96.204 36.823 C 97.33 36.25 97.847 34.923 97.406 33.739 L 96.457 31.119 C 96.025 29.931 94.77 29.257 93.541 29.554 L 87.399 30.756 C 86.835 30.858 86.271 30.585 86 30.081 C 85.642 29.41 85.252 28.727 84.846 28.057 C 84.544 27.567 84.586 26.939 84.952 26.494 L 89.038 21.775 C 89.896 20.852 89.937 19.436 89.132 18.465 L 87.348 16.323 C 86.545 15.35 85.134 15.142 84.084 15.843 L 78.707 19.071 C 78.217 19.364 77.593 19.303 77.171 18.92 C 76.577 18.398 75.981 17.896 75.399 17.432 C 74.95 17.078 74.783 16.473 74.985 15.939 L 77.211 10.073 C 77.713 8.915 77.268 7.564 76.175 6.932 L 73.752 5.525 C 72.658 4.894 71.264 5.187 70.517 6.206 L 66.586 11.134 C 66.296 11.578 65.73 11.752 65.24 11.547 C 65.091 11.487 63.853 10.98 62.889 10.658 C 62.346 10.481 61.982 9.971 61.99 9.4 L 62.084 3.134 C 62.153 1.867 61.271 0.747 60.024 0.518 L 57.271 0.037 C 56.031 -0.177 54.824 0.56 54.447 1.761 L 52.404 7.725 C 52.216 8.27 51.692 8.627 51.115 8.602 L 48.771 8.602 C 48.202 8.612 47.689 8.257 47.497 7.72 L 45.464 1.79 C 45.094 0.58 43.882 -0.167 42.634 0.047 L 39.88 0.528 C 38.64 0.754 37.759 1.863 37.82 3.122 L 37.916 9.41 C 37.92 9.99 37.542 10.503 36.988 10.672 C 36.44 10.886 35.243 11.34 34.702 11.545 C 34.221 11.718 33.695 11.528 33.259 11.04 L 29.351 6.232 C 28.609 5.215 27.222 4.916 26.127 5.537 L 23.709 6.939 C 22.604 7.573 22.156 8.939 22.671 10.105 L 24.894 15.956 C 25.093 16.491 24.929 17.093 24.485 17.453 C 23.901 17.934 23.303 18.415 22.707 18.948 C 22.286 19.328 21.668 19.391 21.18 19.102 L 15.865 15.811 C 14.81 15.123 13.407 15.33 12.594 16.292 L 10.815 18.432 C 9.997 19.396 10.036 20.82 10.904 21.739 L 15.012 26.451 C 15.386 26.887 15.43 27.517 15.12 28.001 C 14.709 28.655 14.317 29.343 13.961 30.03 C 13.688 30.538 13.12 30.811 12.553 30.708 L 6.421 29.523 C 5.191 29.226 3.935 29.9 3.502 31.088 L 2.541 33.703 C 2.1 34.889 2.616 36.216 3.743 36.792 L 9.219 39.833 C 9.725 40.112 9.984 40.693 9.856 41.256 L 9.8 41.554 C 9.673 42.227 9.56 42.864 9.447 43.542 C 9.369 44.107 8.936 44.557 8.375 44.658 L 2.197 45.655 C 0.949 45.81 0.009 46.866 0 48.124 L 0 50.908 C -0.007 52.173 0.944 53.238 2.202 53.374 L 8.375 54.369 C 8.945 54.462 9.385 54.919 9.457 55.492 C 9.574 56.251 9.697 57.035 9.865 57.78 C 9.977 58.336 9.722 58.901 9.233 59.186 L 3.759 62.232 C 2.634 62.806 2.117 64.132 2.558 65.316 L 3.519 67.936 C 3.951 69.124 5.206 69.798 6.435 69.501 L 12.577 68.311 C 13.14 68.21 13.705 68.483 13.976 68.987 C 14.336 69.66 14.726 70.343 15.13 71.011 C 15.434 71.5 15.391 72.129 15.024 72.573 L 10.937 77.295 C 10.07 78.209 10.018 79.627 10.817 80.602 L 12.598 82.744 C 13.402 83.718 14.813 83.926 15.863 83.225 L 21.24 79.996 C 21.73 79.703 22.353 79.765 22.776 80.148 C 23.372 80.67 23.978 81.172 24.548 81.636 C 24.997 81.99 25.164 82.594 24.961 83.129 L 22.735 88.994 C 22.234 90.152 22.679 91.503 23.771 92.136 L 26.202 93.54 C 27.295 94.171 28.688 93.879 29.435 92.862 L 33.413 87.97 C 33.747 87.554 34.279 87.369 34.673 87.528 C 35.507 87.874 36.067 88.069 37.06 88.4 C 37.603 88.578 37.968 89.087 37.961 89.658 L 37.865 95.92 C 37.798 97.185 38.68 98.304 39.925 98.535 L 42.678 99.016 C 43.918 99.231 45.127 98.494 45.502 97.292 L 47.546 91.338 C 47.737 90.795 48.259 90.44 48.834 90.46 L 51.178 90.46 C 51.748 90.45 52.261 90.805 52.452 91.343 L 54.488 97.273 C 54.812 98.33 55.786 99.052 56.892 99.054 C 57.035 99.054 57.178 99.042 57.32 99.016 L 60.077 98.535 C 61.315 98.308 62.195 97.199 62.134 95.941 L 62.038 89.653 C 62.034 89.084 62.399 88.579 62.94 88.403 C 63.863 88.093 64.509 87.843 65.082 87.624 L 65.226 87.566 C 65.961 87.311 66.315 87.6 66.541 87.881 L 70.567 92.84 C 71.315 93.856 72.706 94.148 73.798 93.518 L 76.219 92.117 C 77.315 91.484 77.761 90.128 77.255 88.968 L 75.034 83.117 C 74.833 82.582 74.996 81.979 75.44 81.619 C 76.024 81.138 76.622 80.658 77.219 80.124 C 77.642 79.743 78.264 79.682 78.752 79.975 L 84.134 83.196 C 85.19 83.884 86.593 83.678 87.406 82.715 L 89.185 80.576 C 90.002 79.612 89.964 78.189 89.096 77.271 L 84.995 72.542 C 84.621 72.106 84.577 71.476 84.887 70.992 C 85.298 70.34 85.69 69.653 86.046 68.963 C 86.32 68.457 86.888 68.184 87.454 68.285 L 93.579 69.48 C 94.808 69.776 96.065 69.103 96.497 67.915 L 97.447 65.299 C 97.888 64.115 97.371 62.788 96.245 62.213 L 90.764 59.167 C 90.266 58.885 90.011 58.31 90.137 57.751 L 90.192 57.451 C 90.32 56.778 90.433 56.143 90.546 55.465 C 90.624 54.901 91.057 54.451 91.618 54.35 L 97.796 53.355 C 99.047 53.202 99.991 52.144 100 50.884 L 100 48.069 Z M 29.709 74.833 C 13.503 61.792 13.561 37.09 29.829 24.126 L 44.252 49.513 L 29.709 74.833 Z M 50 82.006 C 46.013 82.01 42.061 81.272 38.344 79.831 L 52.884 54.525 L 82.024 54.525 C 79.618 70.069 66.175 82.006 50 82.006 Z M 52.899 44.53 L 38.488 19.17 C 42.163 17.765 46.065 17.047 50 17.049 C 66.175 17.049 79.618 28.987 82.024 44.53 L 52.899 44.53 Z",
          "M 85.714 64.286 C 85.714 64.286 71.429 75 71.429 86.571 C 71.429 94 77.828 100 85.714 100 C 93.6 100 100 93.973 100 86.571 C 100 75 85.714 64.286 85.714 64.286 Z M 25 0 L 8.036 16.964 L 23.661 32.589 L 0 55.357 L 39.286 96.429 L 73.393 63.326 L 85.714 60.714 L 25 0 Z M 30.357 25.893 L 21.518 16.741 L 25.062 13.194 L 33.929 22.321 L 30.357 25.893 Z",
        ],
        [
          "M 50 30.58 C 59.01 25.028 69.949 23.546 80.112 26.5 C 78.205 11.569 65.429 0 50 0 C 34.571 0 21.795 11.569 19.888 26.489 C 30.053 23.538 40.991 25.025 50 30.58 Z M 67.857 63.333 C 67.641 73.328 63.431 82.82 56.167 89.69 C 60.353 91.777 64.966 92.861 69.643 92.857 C 86.384 92.857 100 79.241 100 62.5 C 99.995 52.498 95.064 43.141 86.817 37.482 C 84.669 48.495 77.716 57.975 67.857 63.333 Z M 56.156 35.31 C 61.832 40.686 65.684 47.701 67.174 55.375 C 74.357 50.442 79.076 42.663 80.134 34.013 C 72.303 31.128 63.628 31.597 56.154 35.31 L 56.156 35.31 Z M 32.154 63.333 C 22.29 57.978 15.332 48.498 13.181 37.482 C 4.934 43.141 0.004 52.499 0 62.5 C 0 79.241 13.616 92.857 30.357 92.857 C 35.038 92.863 39.655 91.779 43.844 89.69 C 36.58 82.82 32.37 73.328 32.154 63.333 Z M 32.826 55.375 C 34.316 47.701 38.168 40.686 43.844 35.31 C 36.37 31.598 27.697 31.128 19.866 34.013 C 20.924 42.663 25.643 50.442 32.826 55.375 Z M 60.469 66.368 C 53.631 68.353 46.369 68.353 39.531 66.368 C 40.499 73.868 44.232 80.735 50 85.625 C 55.768 80.735 59.501 73.868 60.469 66.368 Z M 39.509 58.844 C 46.281 61.338 53.719 61.338 60.491 58.844 C 59.568 51.265 55.822 44.314 50 39.375 C 44.178 44.314 40.432 51.265 39.509 58.844 Z",
          "M 22.643 37.644 L 37.642 22.645 L 55.085 40.088 L 40.086 55.087 L 22.643 37.644 Z M 60.136 45.136 L 45.138 60.136 L 84.821 100 L 100 84.821 L 60.136 45.136 Z M 0 32.143 L 17.857 32.143 L 17.857 39.286 L 0 39.286 L 0 32.143 Z M 7.952 13.002 L 13.002 7.951 L 25.629 20.578 L 20.579 25.629 L 7.952 13.002 Z M 32.143 0 L 39.286 0 L 39.286 17.857 L 32.143 17.857 L 32.143 0 Z M 45.83 20.579 L 58.457 7.952 L 63.508 13.003 L 50.881 25.63 L 45.83 20.579 Z M 7.951 58.457 L 20.578 45.83 L 25.629 50.881 L 13.002 63.508 L 7.951 58.457 Z",
          "M 88.458 73.077 C 85.43 72.875 83.41 72.116 81.728 70.193 C 78.362 66.347 78.362 61.539 83.047 57.577 L 90.937 50.572 C 103.021 39.897 103.021 22.397 90.937 11.719 C 82.031 3.88 70.079 0 57.655 0 C 43.151 0 27.994 5.288 16.309 15.652 C -5.436 34.882 -5.436 66.354 16.309 85.573 C 27.126 95.13 41.701 99.897 56.127 99.996 L 56.569 99.996 C 70.992 99.996 85.192 95.308 95.319 86.349 C 99.997 82.212 99.997 81.01 95.338 73.933 C 94.228 72.116 92.064 73.318 88.458 73.077 Z M 15.381 38.462 C 15.381 32.54 21.791 28.839 26.92 31.8 C 32.048 34.761 32.048 42.163 26.92 45.124 C 25.75 45.799 24.424 46.154 23.073 46.154 C 18.825 46.154 15.381 42.71 15.381 38.462 Z M 24.997 70.914 C 19.075 70.914 15.374 64.504 18.335 59.375 C 21.296 54.247 28.698 54.247 31.658 59.375 C 32.333 60.545 32.689 61.871 32.689 63.222 C 32.689 67.47 29.245 70.914 24.997 70.914 Z M 34.612 23.077 C 34.612 17.155 41.022 13.454 46.151 16.415 C 51.279 19.376 51.279 26.778 46.151 29.739 C 44.981 30.414 43.655 30.769 42.304 30.769 C 38.056 30.769 34.612 27.325 34.612 23.077 Z M 49.997 88.222 C 41.114 88.222 35.563 78.606 40.004 70.914 C 44.445 63.222 55.548 63.222 59.989 70.914 C 61.002 72.668 61.535 74.658 61.535 76.683 C 61.535 83.056 56.369 88.222 49.997 88.222 Z M 67.305 30.769 C 61.383 30.769 57.682 24.359 60.643 19.231 C 63.604 14.103 71.005 14.103 73.966 19.231 C 74.641 20.4 74.997 21.727 74.997 23.077 C 74.997 27.325 71.553 30.769 67.305 30.769 Z",
          "M 50 0 C 22.43 0 0 22.43 0 50 C 0 77.57 22.43 100 50 100 C 77.57 100 100 77.57 100 50 C 100 22.43 77.57 0 50 0 Z M 61.538 61.538 L 23.077 76.923 L 38.462 38.462 L 76.923 23.077 L 61.538 61.538 Z",
        ],
        [
          "M 83.328 0 L 53.795 0 L 72.587 25.058 L 83.328 0 Z M 20.69 0 L 31.431 25.058 L 50.223 0 L 20.69 0 Z M 52.009 9.525 L 37.723 28.571 L 66.295 28.571 L 52.009 9.525 Z M 89.275 4.254 L 78.853 28.571 L 103.795 28.571 L 89.275 4.254 Z M 14.743 4.254 L 0 28.571 L 25.165 28.571 L 14.743 4.254 Z M 27.607 35.714 L 0.223 35.714 L 49.955 100 L 50.074 100 L 27.607 35.714 Z M 76.411 35.714 L 53.944 100 L 54.062 100 L 103.795 35.714 L 76.411 35.714 Z M 68.391 35.714 L 35.627 35.714 L 52.009 82.143 L 68.391 35.714 Z",
          "M 17.195 71.314 C 14.521 71.705 10.121 72.434 7.194 69.114 C 4.267 65.793 1.736 57.774 0.623 50.607 C -1.018 40.044 0.611 31.141 5.207 25.541 C 7.915 22.243 11.47 20.333 15.486 20.029 C 18.926 19.764 24.066 21.11 29.029 29.027 C 32.136 33.988 34.502 40.577 35.516 47.105 C 36.741 54.984 37.935 63.392 33.758 66.407 C 31.402 68.11 29.71 68.699 25.712 69.651 C 22.424 70.432 19.87 70.92 17.195 71.314 Z M 12.44 78.091 L 35.127 73.412 C 37.043 73.016 38.581 74.07 39.294 77.229 C 41.631 87.595 38.28 100 27.788 100 C 17.853 100 11.232 88.675 10.151 82.587 C 9.657 79.826 10.361 78.518 12.44 78.091 Z M 60.956 49.653 C 56.958 48.705 55.266 48.111 52.911 46.409 C 48.733 43.394 49.927 34.985 51.152 27.106 C 52.166 20.578 54.531 13.98 57.639 9.028 C 62.598 1.111 67.738 -0.235 71.182 0.03 C 75.195 0.336 78.751 2.243 81.459 5.541 C 86.059 11.141 87.689 20.043 86.043 30.606 C 84.928 37.773 82.406 45.765 79.461 49.113 C 76.517 52.461 72.142 51.705 69.461 51.313 C 66.779 50.922 64.242 50.432 60.956 49.653 Z M 74.226 58.09 L 51.54 53.411 C 49.623 53.016 48.085 54.069 47.373 57.228 C 45.037 67.595 48.388 80 58.88 80 C 68.815 80 75.437 68.674 76.517 62.586 C 77.009 59.826 76.305 58.517 74.226 58.09 Z",
          "M 85.173 14.789 C 58.201 -12.451 11.856 -0.277 1.752 36.701 C -2.983 54.032 1.984 72.57 14.751 85.211 C 41.723 112.45 88.067 100.276 98.171 63.299 C 102.906 45.968 97.939 27.429 85.173 14.789 Z M 65.968 39.329 C 70.075 39.329 72.642 43.775 70.588 47.332 C 68.535 50.889 63.401 50.889 61.347 47.332 C 60.879 46.521 60.632 45.601 60.632 44.664 C 60.625 41.715 63.018 39.321 65.968 39.329 Z M 33.955 39.329 C 38.062 39.329 40.63 43.775 38.576 47.332 C 36.522 50.889 31.388 50.889 29.335 47.332 C 28.866 46.521 28.621 45.601 28.621 44.664 C 28.613 41.715 31.006 39.321 33.955 39.329 Z M 49.972 78.455 C 39.875 78.455 31.354 71.9 28.693 62.932 C 28.463 62.149 28.176 60.67 28.176 60.67 L 71.748 60.67 C 71.748 60.67 71.456 62.157 71.23 62.932 C 68.611 71.904 60.069 78.455 49.972 78.455 Z",
          "M 39.287 28.66 C 39.287 31.785 39.287 34.815 40.273 37.652 C 29.91 49.818 0 84.416 0 84.416 L 0.697 93.144 C 0.697 93.144 9.064 101.078 10.315 99.876 C 14.017 96.269 16.277 93.817 16.277 93.817 L 18.018 83.394 L 29.345 82.56 L 30.254 71.308 L 42.186 71.079 L 42.304 59.036 L 54.973 59.541 L 57.137 55.011 C 60.863 56.622 64.253 57.271 68.605 57.271 C 85.075 57.271 98.419 44.432 98.419 28.612 C 98.419 12.791 85.065 0 68.596 0 C 52.126 0 39.287 12.839 39.287 28.66 Z M 84.669 23.082 C 84.669 30.272 76.885 34.766 70.657 31.171 C 64.43 27.576 64.43 18.587 70.657 14.992 C 72.077 14.172 73.688 13.741 75.328 13.741 C 80.489 13.735 84.674 17.921 84.669 23.082 Z",
        ],
        [
          "M 43.333 0 C 19.44 0 0 19.44 0 43.333 L 0 75.59 L 17.083 82.425 L 20.6 100 L 30 100 L 30 86.667 L 36.667 86.667 L 36.667 100 L 40 100 L 40 86.667 L 46.667 86.667 L 46.667 100 L 50 100 L 50 86.667 L 56.667 86.667 L 56.667 100 L 66.067 100 L 69.583 82.425 L 86.667 75.59 L 86.667 43.333 C 86.667 19.44 67.227 0 43.333 0 Z M 25 66.667 C 16.019 66.667 10.406 56.944 14.896 49.167 C 19.387 41.389 30.613 41.389 35.104 49.167 C 36.127 50.94 36.667 52.952 36.667 55 C 36.66 61.44 31.44 66.66 25 66.667 Z M 35.731 80 L 40.833 63.333 L 45.833 63.333 L 50.935 80 L 35.731 80 Z M 61.667 66.667 C 52.686 66.667 47.072 56.944 51.563 49.167 C 56.054 41.389 67.28 41.389 71.77 49.167 C 72.794 50.94 73.333 52.952 73.333 55 C 73.326 61.44 68.107 66.66 61.667 66.667 Z M 83.333 73.333 Z",
          "M 82.121 10.714 L 82.121 0 L 17.857 0 L 17.857 10.714 L 0 10.714 L 0 19.196 C 0 26.339 2.121 33.212 5.973 38.529 C 8.949 42.636 13.6 45.471 17.783 46.835 C 18.998 53.373 22.292 59.587 28.987 64.654 C 33.897 68.373 39.801 71.098 45.089 72.212 L 45.089 90.179 L 28.571 90.179 L 28.571 100 L 71.429 100 L 71.429 90.179 L 54.911 90.179 L 54.911 72.212 C 60.199 71.096 66.1 68.373 71.013 64.654 C 77.71 59.587 81.002 53.373 82.217 46.835 C 86.4 45.471 91.051 42.636 94.027 38.529 C 97.879 33.212 100 26.339 100 19.196 L 100 10.714 L 82.121 10.714 Z M 13.929 32.768 C 11.545 29.491 10.096 25.089 9.857 20.536 L 17.857 20.536 L 17.857 35.574 C 16.978 35.319 14.973 34.208 13.929 32.768 Z M 86.071 32.768 C 85.045 34.243 83.482 35.576 82.143 35.576 C 82.143 30.576 82.143 25.243 82.132 20.536 L 90.145 20.536 C 89.904 25.089 88.393 29.442 86.071 32.768 Z",
          "M 34.757 0 C 34.757 0 0 38.209 0 65.243 C 0 86.57 13.43 100 34.757 100 C 56.085 100 69.515 86.57 69.515 65.243 C 69.515 38.209 34.757 0 34.757 0 Z M 38.619 87.449 L 38.619 81.656 C 46.614 81.646 53.092 75.168 53.102 67.174 L 58.895 67.174 C 58.882 78.366 49.812 87.437 38.619 87.449 Z",
          "M 50 0 C 22.387 0 0 22.387 0 50 C 0 77.57 22.433 100 50 100 C 77.611 100 100 77.611 100 50 C 100 22.43 77.57 0 50 0 Z M 75.962 57.692 L 47.115 57.692 C 46.584 57.692 46.154 57.262 46.154 56.731 L 46.154 16.346 C 46.154 15.815 46.584 15.385 47.115 15.385 L 52.885 15.385 C 53.416 15.385 53.846 15.815 53.846 16.346 L 53.846 50 L 75.962 50 C 76.493 50 76.923 50.431 76.923 50.962 L 76.923 56.731 C 76.923 57.262 76.493 57.692 75.962 57.692 Z",
        ],
      ],
    };
  },
  methods: {
    toggleTool(item) {
      if (item.type === "path-tool") {
        this.openDrawer ? (this.openDrawer = false) : (this.openDrawer = true);
        if (this.openDrawer) {
          self.stage.pathTool.d = this.d;
        }
      } else {
        this.openDrawer = false;
      }
      self.stage.toggleTool(item.type);
    },
    watchCurrentTool() {
      self.stage.board.addEventListener("currenttoolchange", () => {
        this.currentTool = self.stage.currentTool;
      });
    },
    keydownEvent() {
      const stage = self.stage;
      document.addEventListener("keydown", (event) => {
        const { code, ctrlKey, shiftKey } = event;
        if (code === "Escape") stage.toggleTool("transform-tool");
        if (stage.textInputMode) return;

        switch (code) {
          case "Space":
            this.currentTool !== "pan-tool" && (preTool = this.currentTool);
            stage.toggleTool("pan-tool");
            break;
          case "KeyA":
            stage.toggleTool("transform-tool");
            break;
          case "KeyT":
            stage.toggleTool("text-tool");
            break;
          case "KeyM":
            stage.toggleTool("rect-tool");
            break;
          case "KeyL":
            stage.toggleTool("ellipse-tool");
            break;
          case "Delete":
            stage.commands.delete();
            break;
          case "KeyZ":
            if (ctrlKey) {
              shiftKey ? stage.undoManager.redo() : stage.undoManager.undo();
            }
            break;
          case "KeyX":
            ctrlKey && stage.clipboardManager.cut();
            break;
          case "KeyC":
            ctrlKey && stage.clipboardManager.copy();
            break;
          case "KeyV":
            ctrlKey && stage.clipboardManager.paste();
            break;
          case "ArrowUp":
            stage.transformManager.move(0, -1);
            break;
          case "ArrowRight":
            stage.transformManager.move(1, 0);
            break;
          case "ArrowDown":
            stage.transformManager.move(0, 1);
            break;
          case "ArrowLeft":
            stage.transformManager.move(-1, 0);
            break;
          default:
        }
      });

      document.addEventListener("keyup", (event) => {
        const { code } = event;
        switch (code) {
          case "Space":
            stage.toggleTool(preTool);
            break;
          default:
            break;
        }
      });
    },
    changePathTool(d) {
      this.d = d;
      self.stage.pathTool.d = d;
      // this.openDrawer = false;
    },
  },
  mounted() {
    this.watchCurrentTool();
    self.stage.toggleTool("transform-tool");
    this.keydownEvent();
  },
};
</script>
<style scoped>
.left {
  display: flex;
  flex-direction: column;
  z-index: 2;
  position: relative;
  height: 100%;
}

.left-bar {
  display: flex;
  flex-direction: column;
  gap: 3px;
  height: 100%;
  background-color: #fcfcfc;
  position: relative;
  z-index: 8999;
  padding: 3px;
  border-right: 1px solid #d1d1d1;
}

.left button {
  width: 30px;
  height: 30px;
  border-radius: 6px;
  background: #ffffff;
  cursor: pointer;
  gap: 3px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.25s;
}

.left button:hover {
  background: #ededed;
}

.left button:active {
  box-shadow: inset 0 0px 4px #b9b9b9;
}

.left button.active {
  background: var(--fx-color-primary);
  color: #fff;
}

.left button.active:hover {
  box-shadow: none;
}

.drawer button {
  border: 1px solid #d1d1d1;
}
</style>
